# Ø±Ø§Ù‡Ù†Ù…Ø§ÛŒ ØªÙˆØ³Ø¹Ù‡â€ŒØ¯Ù‡Ù†Ø¯Ú¯Ø§Ù† Persian Navigator Lite

## ğŸ—ï¸ Ù…Ø¹Ù…Ø§Ø±ÛŒ Ù¾Ø±ÙˆÚ˜Ù‡

### Ø³Ø§Ø®ØªØ§Ø± Ù¾Ú©ÛŒØ¬â€ŒÙ‡Ø§
```
ir.navigator.persian.lite/
â”œâ”€â”€ MainActivity.kt              # ÙØ¹Ø§Ù„ÛŒØª Ø§ØµÙ„ÛŒ Ùˆ ÙˆØ±ÙˆØ¯ÛŒ Ø§Ù¾Ù„ÛŒÚ©ÛŒØ´Ù†
â”œâ”€â”€ NavigatorEngine.kt           # Ù…ÙˆØªÙˆØ± Ø§ØµÙ„ÛŒ Ù…Ø³ÛŒØ±ÛŒØ§Ø¨ÛŒ
â”œâ”€â”€ DestinationManager.kt        # Ù…Ø¯ÛŒØ±ÛŒØª Ù…Ù‚Ø§ØµØ¯
â”œâ”€â”€ ai/                          # ÙˆÛŒÚ˜Ú¯ÛŒâ€ŒÙ‡Ø§ÛŒ Ù‡ÙˆØ´ Ù…ØµÙ†ÙˆØ¹ÛŒ
â”‚   â”œâ”€â”€ AIAssistant.kt          # Ø¯Ø³ØªÛŒØ§Ø± Ù‡ÙˆØ´ Ø§ØµÙ„ÛŒ
â”‚   â””â”€â”€ DrivingChatAssistant.kt # Ú†Øª Ù‡ÙˆØ´Ù…Ù†Ø¯ Ø±Ø§Ù†Ù†Ø¯Ú¯ÛŒ
â”œâ”€â”€ ui/                          # Ø±Ø§Ø¨Ø· Ú©Ø§Ø±Ø¨Ø±ÛŒ
â”‚   â”œâ”€â”€ DayNightModeManager.kt  # Ù…Ø¯ÛŒØ±ÛŒØª Ø­Ø§Ù„Øª Ø´Ø¨/Ø±ÙˆØ²
â”‚   â”œâ”€â”€ AIChatActivity.kt       # ÙØ¹Ø§Ù„ÛŒØª Ú†Øª Ø¨Ø§ AI
â”‚   â””â”€â”€ StatisticsActivity.kt   # Ø¢Ù…Ø§Ø± (Ø­Ø°Ù Ø´Ø¯Ù‡)
â”œâ”€â”€ analytics/                   # ØªØ­Ù„ÛŒÙ„ Ø¯Ø§Ø¯Ù‡â€ŒÙ‡Ø§
â”‚   â””â”€â”€ FuelCostAnalyzer.kt     # ØªØ­Ù„ÛŒÙ„ Ù…ØµØ±Ù Ø³ÙˆØ®Øª
â”œâ”€â”€ learning/                    # ÛŒØ§Ø¯Ú¯ÛŒØ±ÛŒ Ù…Ø§Ø´ÛŒÙ†
â”‚   â””â”€â”€ DriverLearningSystem.kt # Ø³ÛŒØ³ØªÙ… ÛŒØ§Ø¯Ú¯ÛŒØ±ÛŒ Ø±Ø§Ù†Ù†Ø¯Ù‡
â”œâ”€â”€ vehicle/                     # Ø§ØªØµØ§Ù„ Ø¨Ù‡ Ø®ÙˆØ¯Ø±Ùˆ
â”‚   â””â”€â”€ SmartVehicleConnector.kt # Ø§ØªØµØ§Ù„ Ø¨Ù‡ OBD-II
â”œâ”€â”€ safety/                      # Ø§ÛŒÙ…Ù†ÛŒ
â”‚   â”œâ”€â”€ DrivingBehaviorMonitor.kt # Ù†Ø¸Ø§Ø±Øª Ø±ÙØªØ§Ø± Ø±Ø§Ù†Ù†Ø¯Ù‡
â”‚   â””â”€â”€ EmergencyMode.kt        # Ø­Ø§Ù„Øª Ø§Ø¶Ø·Ø±Ø§Ø±ÛŒ
â”œâ”€â”€ navigation/                  # Ù…Ø³ÛŒØ±ÛŒØ§Ø¨ÛŒ
â”‚   â”œâ”€â”€ DestinationSearchActivity.kt
â”‚   â””â”€â”€ Destination.kt
â”œâ”€â”€ service/                     # Ø³Ø±ÙˆÛŒØ³â€ŒÙ‡Ø§ÛŒ Ù¾Ø³â€ŒØ²Ù…ÛŒÙ†Ù‡
â”‚   â””â”€â”€ NavigationService.kt    # Ø³Ø±ÙˆÛŒØ³ Ø§ØµÙ„ÛŒ Ù†Ø§ÙˆØ¨Ø±ÛŒ
â”œâ”€â”€ tts/                         # ØªØ¨Ø¯ÛŒÙ„ Ù…ØªÙ† Ø¨Ù‡ Ú¯ÙØªØ§Ø±
â”‚   â”œâ”€â”€ AdvancedPersianTTS.kt   # TTS Ù¾ÛŒØ´Ø±ÙØªÙ‡ ÙØ§Ø±Ø³ÛŒ
â”‚   â””â”€â”€ Priority.kt             # Ø§ÙˆÙ„ÙˆÛŒØªâ€ŒÙ‡Ø§ÛŒ ØµÙˆØªÛŒ
â”œâ”€â”€ api/                         # API Ùˆ Ú©Ù„ÛŒØ¯Ù‡Ø§
â”‚   â”œâ”€â”€ SecureKeys.kt           # Ù…Ø¯ÛŒØ±ÛŒØª Ú©Ù„ÛŒØ¯Ù‡Ø§ÛŒ Ø§Ù…Ù†
â”‚   â””â”€â”€ KeyActivationActivity.kt
â””â”€â”€ utils/                       # Ø§Ø¨Ø²Ø§Ø±Ù‡Ø§ÛŒ Ú©Ù…Ú©ÛŒ
    â””â”€â”€ LocationUtils.kt
```

## ğŸ”§ Ú©Ø§Ù…Ù¾ÙˆÙ†Ù†Øªâ€ŒÙ‡Ø§ÛŒ Ø§ØµÙ„ÛŒ

### 1. Ù…ÙˆØªÙˆØ± Ù…Ø³ÛŒØ±ÛŒØ§Ø¨ÛŒ (NavigatorEngine)
```kotlin
class NavigatorEngine(private val context: Context, private val listener: NavigationListener) {
    // Ø´Ø±ÙˆØ¹ Ù…Ø³ÛŒØ±ÛŒØ§Ø¨ÛŒ
    fun startNavigation()
    
    // ØªÙˆÙ‚Ù Ù…Ø³ÛŒØ±ÛŒØ§Ø¨ÛŒ
    fun stopNavigation()
    
    // ØªØ³Øª Ù‡Ø´Ø¯Ø§Ø± ØµÙˆØªÛŒ
    fun testVoiceAlert()
    
    // Ø¨Ù‡â€ŒØ±ÙˆØ²Ø±Ø³Ø§Ù†ÛŒ Ù…ÙˆÙ‚Ø¹ÛŒØª
    fun updateLocation(latitude: Double, longitude: Double)
}
```

### 2. TTS Ù¾ÛŒØ´Ø±ÙØªÙ‡ ÙØ§Ø±Ø³ÛŒ (AdvancedPersianTTS)
```kotlin
class AdvancedPersianTTS(private val context: Context) {
    // ØµØ­Ø¨Øª Ø¨Ø§ Ø§ÙˆÙ„ÙˆÛŒØª
    fun speak(text: String, priority: Priority)
    
    // ØªØ³Øª ØµØ¯Ø§
    fun testVoice()
    
    // Ø¨Ø±Ø±Ø³ÛŒ Ø¢Ù…Ø§Ø¯Ú¯ÛŒ
    fun isReady(): Boolean
    
    // Ø®Ø§Ù…ÙˆØ´ Ú©Ø±Ø¯Ù†
    fun shutdown()
}
```

### 3. Ø§ÙˆÙ„ÙˆÛŒØªâ€ŒÙ‡Ø§ÛŒ ØµÙˆØªÛŒ (Priority)
```kotlin
enum class Priority {
    LOW,      // Ø§ÙˆÙ„ÙˆÛŒØª Ú©Ù…
    NORMAL,   // Ø§ÙˆÙ„ÙˆÛŒØª Ø¹Ø§Ø¯ÛŒ
    HIGH,     // Ø§ÙˆÙ„ÙˆÛŒØª Ø¨Ø§Ù„Ø§
    URGENT    // Ø§ÙˆÙ„ÙˆÛŒØª ÙÙˆØ±ÛŒ
}
```

## ğŸš€ Ø§ÙØ²ÙˆØ¯Ù† ÙˆÛŒÚ˜Ú¯ÛŒ Ø¬Ø¯ÛŒØ¯

### Ù…Ø±Ø­Ù„Ù‡ 1: Ø§ÛŒØ¬Ø§Ø¯ Ú©Ù„Ø§Ø³ Ø¬Ø¯ÛŒØ¯
```kotlin
// Ø¯Ø± Ù¾Ú©ÛŒØ¬ Ù…Ù†Ø§Ø³Ø¨
class NewFeature(private val context: Context) {
    private val scope = CoroutineScope(Dispatchers.Default + SupervisorJob())
    private lateinit var tts: AdvancedPersianTTS
    
    init {
        initializeTTS()
    }
    
    private fun initializeTTS() {
        tts = AdvancedPersianTTS(context)
    }
    
    fun activate() {
        scope.launch {
            // Ù…Ù†Ø·Ù‚ ÙˆÛŒÚ˜Ú¯ÛŒ Ø¬Ø¯ÛŒØ¯
            tts.speak("ÙˆÛŒÚ˜Ú¯ÛŒ Ø¬Ø¯ÛŒØ¯ ÙØ¹Ø§Ù„ Ø´Ø¯", Priority.NORMAL)
        }
    }
    
    fun shutdown() {
        scope.cancel()
        tts.shutdown()
    }
}
```

### Ù…Ø±Ø­Ù„Ù‡ 2: Ø§Ø¯ØºØ§Ù… Ø¯Ø± MainActivity
```kotlin
// Ø¯Ø± MainActivity.kt
private lateinit var newFeature: NewFeature

private fun initializeNewFeatures() {
    newFeature = NewFeature(this)
}

override fun onDestroy() {
    super.onDestroy()
    newFeature.shutdown()
}
```

### Ù…Ø±Ø­Ù„Ù‡ 3: Ø§ÙØ²ÙˆØ¯Ù† Ù…Ø¬ÙˆØ²Ù‡Ø§ (Ø¯Ø± ØµÙˆØ±Øª Ù†ÛŒØ§Ø²)
```xml
<!-- Ø¯Ø± AndroidManifest.xml -->
<uses-permission android:name="android.permission.YOUR_PERMISSION" />
```

## ğŸ“± Ø§Ù„Ú¯ÙˆÙ‡Ø§ÛŒ Ø·Ø±Ø§Ø­ÛŒ

### 1. Ø§Ø³ØªÙØ§Ø¯Ù‡ Ø§Ø² Coroutines
```kotlin
class FeatureClass {
    private val scope = CoroutineScope(Dispatchers.Default + SupervisorJob())
    
    fun doAsyncWork() {
        scope.launch {
            // Ú©Ø§Ø± ØºÛŒØ±Ù‡Ù…Ø²Ù…Ø§Ù†
            withContext(Dispatchers.Main) {
                // Ø¢Ù¾Ø¯ÛŒØª UI
            }
        }
    }
    
    fun shutdown() {
        scope.cancel()
    }
}
```

### 2. Ù…Ø¯ÛŒØ±ÛŒØª Ø®Ø·Ø§
```kotlin
try {
    // Ú©Ø¯ Ø§ØµÙ„ÛŒ
    riskyOperation()
} catch (e: Exception) {
    Log.e("Feature", "âŒ Ø®Ø·Ø§: ${e.message}")
    // Ù…Ø¯ÛŒØ±ÛŒØª Ø®Ø·Ø§
    handleError(e)
}
```

### 3. Ø§Ø³ØªÙØ§Ø¯Ù‡ Ø§Ø² TTS
```kotlin
// Ø¨Ø§ Ø§ÙˆÙ„ÙˆÛŒØª Ù…Ù†Ø§Ø³Ø¨
tts.speak("Ù¾ÛŒØ§Ù… ÙØ§Ø±Ø³ÛŒ", Priority.HIGH)

// Ø¨Ø±Ø§ÛŒ Ù‡Ø´Ø¯Ø§Ø±Ù‡Ø§ÛŒ Ù…Ù‡Ù…
tts.speak("Ù‡Ø´Ø¯Ø§Ø± ÙÙˆØ±ÛŒ", Priority.URGENT)
```

## ğŸ” Ù…Ø¯ÛŒØ±ÛŒØª Ú©Ù„ÛŒØ¯Ù‡Ø§ÛŒ API

### Ø§Ø³ØªÙØ§Ø¯Ù‡ Ø§Ø² SecureKeys
```kotlin
// Ù…Ù‚Ø¯Ø§Ø±Ø¯Ù‡ÛŒ Ø§ÙˆÙ„ÛŒÙ‡
SecureKeys.init(context)

// Ø¯Ø±ÛŒØ§ÙØª Ú©Ù„ÛŒØ¯ OpenAI
val openAIKey = SecureKeys.getOpenAIKey()

// Ø¨Ø±Ø±Ø³ÛŒ ÙØ¹Ø§Ù„ Ø¨ÙˆØ¯Ù† Ú©Ù„ÛŒØ¯Ù‡Ø§
if (SecureKeys.areKeysActivated()) {
    // Ø§Ø³ØªÙØ§Ø¯Ù‡ Ø§Ø² API
}
```

## ğŸ“Š Ø°Ø®ÛŒØ±Ù‡â€ŒØ³Ø§Ø²ÛŒ Ø¯Ø§Ø¯Ù‡â€ŒÙ‡Ø§

### SharedPreferences Ø¨Ø±Ø§ÛŒ ØªÙ†Ø¸ÛŒÙ…Ø§Øª
```kotlin
val prefs = context.getSharedPreferences("feature_prefs", Context.MODE_PRIVATE)
prefs.edit().putString("key", "value").apply()
```

### ÙØ§ÛŒÙ„â€ŒÙ‡Ø§ÛŒ JSON Ø¨Ø±Ø§ÛŒ Ø¯Ø§Ø¯Ù‡â€ŒÙ‡Ø§ÛŒ Ù¾ÛŒÚ†ÛŒØ¯Ù‡
```kotlin
val gson = Gson()
val jsonString = gson.toJson(dataObject)

// Ø°Ø®ÛŒØ±Ù‡ Ø¯Ø± ÙØ§ÛŒÙ„
context.openFileOutput("data.json", Context.MODE_PRIVATE).use {
    it.write(jsonString.toByteArray())
}
```

## ğŸ§ª ØªØ³Øª Ùˆ Ø¯ÛŒØ¨Ø§Ú¯

### Ù„Ø§Ú¯â€ŒÚ¯Ø°Ø§Ø±ÛŒ Ø§Ø³ØªØ§Ù†Ø¯Ø§Ø±Ø¯
```kotlin
class FeatureClass {
    companion object {
        private const val TAG = "FeatureClass"
    }
    
    fun doSomething() {
        Log.i(TAG, "âœ… Ø¹Ù…Ù„ÛŒØ§Øª Ù…ÙˆÙÙ‚ Ø¨ÙˆØ¯")
        Log.w(TAG, "âš ï¸ Ù‡Ø´Ø¯Ø§Ø±")
        Log.e(TAG, "âŒ Ø®Ø·Ø§", exception)
    }
}
```

### ØªØ³Øª ÙˆÛŒÚ˜Ú¯ÛŒâ€ŒÙ‡Ø§
```kotlin
// Ø¯Ø± MainActivity
private fun testFeature() {
    try {
        newFeature.test()
        Toast.makeText(this, "ØªØ³Øª Ù…ÙˆÙÙ‚ Ø¨ÙˆØ¯", Toast.LENGTH_SHORT).show()
    } catch (e: Exception) {
        Toast.makeText(this, "Ø®Ø·Ø§ Ø¯Ø± ØªØ³Øª: ${e.message}", Toast.LENGTH_LONG).show()
    }
}
```

## ğŸ¨ Ø¨Ù‡ØªØ±ÛŒÙ† Ø´ÛŒÙˆÙ‡â€ŒÙ‡Ø§

### 1. Ù…Ø¯ÛŒØ±ÛŒØª Ù…Ù†Ø§Ø¨Ø¹
- Ù‡Ù…ÛŒØ´Ù‡ `shutdown()` Ø±Ø§ Ø¯Ø± `onDestroy()` ÙØ±Ø§Ø®ÙˆØ§Ù†ÛŒ Ú©Ù†ÛŒØ¯
- Ø§Ø² `CoroutineScope` Ø¨Ø§ `SupervisorJob` Ø§Ø³ØªÙØ§Ø¯Ù‡ Ú©Ù†ÛŒØ¯
- Ù…Ù†Ø§Ø¨Ø¹ TTS Ùˆ Ø¨Ù„ÙˆØªÙˆØ« Ø±Ø§ Ø¨Ù‡ Ø¯Ø±Ø³ØªÛŒ Ø¢Ø²Ø§Ø¯ Ú©Ù†ÛŒØ¯

### 2. Ù…Ø¯ÛŒØ±ÛŒØª Ù…Ø¬ÙˆØ²Ù‡Ø§
- Ù…Ø¬ÙˆØ²Ù‡Ø§ÛŒ Ù„Ø§Ø²Ù… Ø±Ø§ Ø¯Ø± AndroidManifest.xml Ø§Ø¶Ø§ÙÙ‡ Ú©Ù†ÛŒØ¯
- Ù‚Ø¨Ù„ Ø§Ø² Ø§Ø³ØªÙØ§Ø¯Ù‡ Ø§Ø² Ø³Ø±ÙˆÛŒØ³â€ŒÙ‡Ø§ØŒ Ù…Ø¬ÙˆØ²Ù‡Ø§ Ø±Ø§ Ø¨Ø±Ø±Ø³ÛŒ Ú©Ù†ÛŒØ¯

### 3. Ø·Ø±Ø§Ø­ÛŒ Ù…Ø§Ú˜ÙˆÙ„Ø§Ø±
- Ù‡Ø± ÙˆÛŒÚ˜Ú¯ÛŒ Ø¯Ø± Ú©Ù„Ø§Ø³ Ø¬Ø¯Ø§Ú¯Ø§Ù†Ù‡
- Ø§Ø³ØªÙØ§Ø¯Ù‡ Ø§Ø² interface Ø¨Ø±Ø§ÛŒ Ø§Ø±ØªØ¨Ø§Ø· Ø¨ÛŒÙ† Ú©Ø§Ù…Ù¾ÙˆÙ†Ù†Øªâ€ŒÙ‡Ø§
- Ø¬Ø¯Ø§Ø³Ø§Ø²ÛŒ Ù…Ù†Ø·Ù‚ Ø§Ø² UI

### 4. Ù¾ÛŒØ§Ù…â€ŒÙ‡Ø§ÛŒ ÙØ§Ø±Ø³ÛŒ
- ØªÙ…Ø§Ù… Ù¾ÛŒØ§Ù…â€ŒÙ‡Ø§ÛŒ Ú©Ø§Ø±Ø¨Ø± Ø¨Ù‡ ÙØ§Ø±Ø³ÛŒ Ø¨Ø§Ø´Ù†Ø¯
- Ø§Ø² Priority Ù…Ù†Ø§Ø³Ø¨ Ø¨Ø±Ø§ÛŒ Ù‡Ø´Ø¯Ø§Ø±Ù‡Ø§ Ø§Ø³ØªÙØ§Ø¯Ù‡ Ú©Ù†ÛŒØ¯
- Ù¾ÛŒØ§Ù…â€ŒÙ‡Ø§ÛŒ Ú©ÙˆØªØ§Ù‡ Ùˆ ÙˆØ§Ø¶Ø­

## ğŸ”„ Ø¬Ø±ÛŒØ§Ù† Ú©Ø§Ø± ØªÙˆØ³Ø¹Ù‡

1. **Ø§ÛŒØ¬Ø§Ø¯ Ø´Ø§Ø®Ù‡ Ø¬Ø¯ÛŒØ¯**: `git checkout -b feature/new-feature`
2. **Ù¾ÛŒØ§Ø¯Ù‡â€ŒØ³Ø§Ø²ÛŒ ÙˆÛŒÚ˜Ú¯ÛŒ**: Ø·Ø¨Ù‚ Ø§Ù„Ú¯ÙˆÙ‡Ø§ÛŒ Ø·Ø±Ø§Ø­ÛŒ
3. **ØªØ³Øª**: ØªØ³Øª Ú©Ø§Ù…Ù„ ÙˆÛŒÚ˜Ú¯ÛŒ
4. **Ù…Ø³ØªÙ†Ø¯Ø³Ø§Ø²ÛŒ**: Ø¨Ù‡â€ŒØ±ÙˆØ²Ø±Ø³Ø§Ù†ÛŒ Ø±Ø§Ù‡Ù†Ù…Ø§
5. **Ø§Ø¯ØºØ§Ù…**: Pull Request Ùˆ Merge

## ğŸ“š Ù…Ù†Ø§Ø¨Ø¹ Ù…ÙÛŒØ¯

- [Kotlin Coroutines Documentation](https://kotlinlang.org/docs/coroutines-overview.html)
- [Android Bluetooth Guide](https://developer.android.com/guide/topics/connectivity/bluetooth)
- [Android TTS Documentation](https://developer.android.com/reference/android/speech/tts/TextToSpeech)
- [OpenAI API Documentation](https://platform.openai.com/docs/api-reference)

## ğŸ Ù…Ø´Ú©Ù„Ø§Øª Ø±Ø§ÛŒØ¬

### 1. Ø®Ø·Ø§ Ø¯Ø± TTS
```kotlin
// Ø¨Ø±Ø±Ø³ÛŒ Ø¢Ù…Ø§Ø¯Ú¯ÛŒ TTS
if (!tts.isReady()) {
    Log.w(TAG, "TTS Ø¢Ù…Ø§Ø¯Ù‡ Ù†ÛŒØ³Øª")
    return
}
```

### 2. Ø®Ø·Ø§ Ø¯Ø± Ø§ØªØµØ§Ù„ Ø¨Ù„ÙˆØªÙˆØ«
```kotlin
// Ø¨Ø±Ø±Ø³ÛŒ ÙØ¹Ø§Ù„ Ø¨ÙˆØ¯Ù† Ø¨Ù„ÙˆØªÙˆØ«
if (bluetoothAdapter?.isEnabled != true) {
    Log.w(TAG, "Ø¨Ù„ÙˆØªÙˆØ« ÙØ¹Ø§Ù„ Ù†ÛŒØ³Øª")
    return
}
```

### 3. Ø®Ø·Ø§ Ø¯Ø± Coroutines
```kotlin
// Ø§Ø³ØªÙØ§Ø¯Ù‡ Ø§Ø² try-catch Ø¯Ø± coroutines
scope.launch {
    try {
        riskyOperation()
    } catch (e: Exception) {
        Log.e(TAG, "Ø®Ø·Ø§ Ø¯Ø± coroutine", e)
    }
}
```

---

**Ù†Ú©ØªÙ‡**: Ù‡Ù…ÛŒØ´Ù‡ Ú©Ø¯ Ø±Ø§ ØªÙ…ÛŒØ² Ùˆ Ù…Ø³ØªÙ†Ø¯ Ù†Ú¯Ù‡ Ø¯Ø§Ø±ÛŒØ¯. Ø§Ø² Ù†Ø§Ù…â€ŒÙ‡Ø§ÛŒ ÙˆØ§Ø¶Ø­ Ø¨Ø±Ø§ÛŒ Ù…ØªØºÛŒØ±Ù‡Ø§ Ùˆ ØªÙˆØ§Ø¨Ø¹ Ø§Ø³ØªÙØ§Ø¯Ù‡ Ú©Ù†ÛŒØ¯.
